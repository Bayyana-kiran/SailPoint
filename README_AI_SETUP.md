# IdentityIQ AI-Powered SQL Query Generator - Setup Instructions

This system generates SQL queries purely using AI - no hardcoded queries are used. You need to configure at least one AI service to enable query generation.

## Quick Setup

1. **Copy the environment template:**

   ```bash
   cp .env.example .env
   ```

2. **Configure at least one AI service in `.env`:**

### Option 1: Google Generative AI (Recommended)

```
GOOGLE_API_KEY=your_actual_google_gemini_api_key
```

- Get your API key from: https://makersuite.google.com/app/apikey
- Free tier available with generous limits

### Option 2: OpenAI

```
OPENAI_API_KEY=your_actual_openai_api_key
```

- Get your API key from: https://platform.openai.com/api-keys
- Requires paid account for API access

## Features

✅ **Pure AI-Driven**: No hardcoded SQL queries - everything generated by AI
✅ **IdentityIQ Expertise**: Deep understanding of SailPoint IdentityIQ schema
✅ **Smart Context**: Comprehensive database metadata and relationships
✅ **Business Logic**: Maps business terms (users, roles, apps) to technical tables
✅ **Security**: Query validation and safety checks

## Usage Examples

Once configured, you can ask natural language questions:

- "How many users are there?"
- "Show me users by department"
- "List all applications and their types"
- "Find users with admin roles"
- "Show recent workflow activities"
- "What certifications are in progress?"

The AI will generate appropriate SQL queries based on your IdentityIQ database schema.

## Troubleshooting

**Error: "AI service is currently unavailable"**

- Configure your API key in `.env` file
- Restart the Streamlit application
- Check your API key has proper permissions

**Need help with API keys?**

- Google AI: https://ai.google.dev/tutorials/setup
- OpenAI: https://platform.openai.com/docs/quickstart

## Advanced Configuration

Edit `config/ai_config.py` to customize:

- Model selection (Gemini Pro, GPT-4, etc.)
- Temperature and generation parameters
- Fallback behavior
- Query complexity limits
